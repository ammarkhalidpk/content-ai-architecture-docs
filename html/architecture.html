<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecture Diagram - Content AI Platform</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="sidebar">
        <div class="sidebar-header">
            <h2>Content AI Platform</h2>
            <p>Architecture Documentation</p>
        </div>
        <ul class="nav-links">
            <li><a href="index.html">Overview</a></li>
            <li><a href="architecture.html" class="active">Architecture Diagram</a></li>
            <li><a href="data-flows.html">Data Flows</a></li>
            <li><a href="components.html">Components</a></li>
            <li><a href="integration.html">Integration Patterns</a></li>
            <li><a href="cost-analysis.html">Cost Analysis</a></li>
            <li><a href="calculator.html" class="highlight">Cost Calculator</a></li>
        </ul>
        <div class="sidebar-footer">
            <p>Last Updated: February 2026</p>
        </div>
    </nav>

    <main class="content">
        <header class="page-header">
            <h1>Architecture Diagram</h1>
            <p class="subtitle">Visual representation of the Content AI Platform</p>
        </header>

        <div class="alert alert-info">
            <strong>Interactive Diagram:</strong> A full Draw.io diagram is available at
            <code>architecture-diagram.drawio</code> - open with <a href="https://app.diagrams.net" target="_blank">diagrams.net</a>
        </div>

        <!-- Architecture Overview SVG -->
        <section>
            <h2>System Architecture</h2>
            <div class="architecture-svg">
                <svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg" style="max-width: 100%; height: auto;">
                    <!-- Background -->
                    <rect width="1200" height="800" fill="#f8fafc"/>

                    <!-- Title -->
                    <text x="600" y="35" text-anchor="middle" font-size="24" font-weight="bold" fill="#1e293b">Content AI Platform - System Architecture</text>

                    <!-- Frontend Layer -->
                    <rect x="50" y="60" width="200" height="120" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                    <text x="150" y="85" text-anchor="middle" font-size="14" font-weight="bold" fill="#1e40af">Frontend Layer</text>
                    <rect x="70" y="100" width="160" height="60" rx="4" fill="#bbf7d0" stroke="#22c55e" stroke-width="1"/>
                    <text x="150" y="125" text-anchor="middle" font-size="11" fill="#166534">React UI</text>
                    <text x="150" y="145" text-anchor="middle" font-size="9" fill="#166534">fbdms-adhoc-imaging-ui</text>

                    <!-- API Gateway Layer -->
                    <rect x="300" y="60" width="200" height="200" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
                    <text x="400" y="85" text-anchor="middle" font-size="14" font-weight="bold" fill="#b45309">API Gateway</text>
                    <rect x="320" y="100" width="160" height="50" rx="4" fill="#fff" stroke="#f59e0b"/>
                    <text x="400" y="120" text-anchor="middle" font-size="10" fill="#92400e">Public API</text>
                    <text x="400" y="135" text-anchor="middle" font-size="8" fill="#92400e">CloudFront + WAF</text>
                    <rect x="320" y="160" width="160" height="50" rx="4" fill="#fff" stroke="#f59e0b"/>
                    <text x="400" y="180" text-anchor="middle" font-size="10" fill="#92400e">Private API</text>
                    <text x="400" y="195" text-anchor="middle" font-size="8" fill="#92400e">VPC Endpoints</text>
                    <rect x="320" y="220" width="160" height="30" rx="4" fill="#fef08a" stroke="#eab308"/>
                    <text x="400" y="240" text-anchor="middle" font-size="10" fill="#854d0e">Cognito Auth</text>

                    <!-- Orchestration Layer -->
                    <rect x="550" y="60" width="350" height="200" rx="8" fill="#e0e7ff" stroke="#6366f1" stroke-width="2"/>
                    <text x="725" y="85" text-anchor="middle" font-size="14" font-weight="bold" fill="#4338ca">Orchestration (self-service-imaging-app)</text>

                    <rect x="570" y="100" width="150" height="70" rx="4" fill="#c7d2fe" stroke="#6366f1"/>
                    <text x="645" y="120" text-anchor="middle" font-size="10" fill="#4338ca">Step Functions</text>
                    <text x="645" y="135" text-anchor="middle" font-size="8" fill="#4338ca">Job Processing</text>
                    <text x="645" y="150" text-anchor="middle" font-size="8" fill="#4338ca">State Machine</text>

                    <rect x="740" y="100" width="150" height="70" rx="4" fill="#bbf7d0" stroke="#22c55e"/>
                    <text x="815" y="120" text-anchor="middle" font-size="10" fill="#166534">API Lambdas</text>
                    <text x="815" y="135" text-anchor="middle" font-size="8" fill="#166534">Request, Status</text>
                    <text x="815" y="150" text-anchor="middle" font-size="8" fill="#166534">Process, Output</text>

                    <rect x="570" y="180" width="150" height="70" rx="4" fill="#bbf7d0" stroke="#22c55e"/>
                    <text x="645" y="200" text-anchor="middle" font-size="10" fill="#166534">Event Lambdas</text>
                    <text x="645" y="215" text-anchor="middle" font-size="8" fill="#166534">CIP/VPE Output</text>
                    <text x="645" y="230" text-anchor="middle" font-size="8" fill="#166534">Processing</text>

                    <rect x="740" y="180" width="150" height="70" rx="4" fill="#fecaca" stroke="#ef4444"/>
                    <text x="815" y="200" text-anchor="middle" font-size="10" fill="#dc2626">DynamoDB</text>
                    <text x="815" y="215" text-anchor="middle" font-size="8" fill="#dc2626">Jobs & Files</text>
                    <text x="815" y="230" text-anchor="middle" font-size="8" fill="#dc2626">Single Table</text>

                    <!-- Processing Layer -->
                    <rect x="50" y="290" width="500" height="220" rx="8" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
                    <text x="300" y="315" text-anchor="middle" font-size="14" font-weight="bold" fill="#166534">CIP - Document Processing (textract-imaging-service)</text>

                    <rect x="70" y="330" width="100" height="50" rx="4" fill="#fef3c7" stroke="#f59e0b"/>
                    <text x="120" y="355" text-anchor="middle" font-size="10" fill="#b45309">Textract</text>
                    <text x="120" y="370" text-anchor="middle" font-size="8" fill="#b45309">OCR/Forms</text>

                    <rect x="180" y="330" width="100" height="50" rx="4" fill="#e0f2fe" stroke="#0ea5e9"/>
                    <text x="230" y="355" text-anchor="middle" font-size="10" fill="#0369a1">Comprehend</text>
                    <text x="230" y="370" text-anchor="middle" font-size="8" fill="#0369a1">PII Detection</text>

                    <rect x="290" y="330" width="100" height="50" rx="4" fill="#f3e8ff" stroke="#a855f7"/>
                    <text x="340" y="355" text-anchor="middle" font-size="10" fill="#7c3aed">Bedrock</text>
                    <text x="340" y="370" text-anchor="middle" font-size="8" fill="#7c3aed">Classification</text>

                    <rect x="400" y="330" width="100" height="50" rx="4" fill="#fce7f3" stroke="#ec4899"/>
                    <text x="450" y="355" text-anchor="middle" font-size="10" fill="#be185d">SageMaker</text>
                    <text x="450" y="370" text-anchor="middle" font-size="8" fill="#be185d">ML Models</text>

                    <rect x="70" y="400" width="220" height="40" rx="4" fill="#bbf7d0" stroke="#22c55e"/>
                    <text x="180" y="425" text-anchor="middle" font-size="10" fill="#166534">Lambda Functions (20+)</text>

                    <rect x="300" y="400" width="100" height="40" rx="4" fill="#fecaca" stroke="#ef4444"/>
                    <text x="350" y="425" text-anchor="middle" font-size="10" fill="#dc2626">DynamoDB</text>

                    <rect x="410" y="400" width="100" height="40" rx="4" fill="#e0e7ff" stroke="#6366f1"/>
                    <text x="460" y="425" text-anchor="middle" font-size="10" fill="#4338ca">Step Funcs</text>

                    <rect x="70" y="455" width="440" height="40" rx="4" fill="#fef3c7" stroke="#f59e0b"/>
                    <text x="290" y="480" text-anchor="middle" font-size="10" fill="#b45309">S3 Input/Output Buckets</text>

                    <!-- VPE Layer -->
                    <rect x="600" y="290" width="500" height="220" rx="8" fill="#f3e8ff" stroke="#a855f7" stroke-width="2"/>
                    <text x="850" y="315" text-anchor="middle" font-size="14" font-weight="bold" fill="#7c3aed">VPE - Video Processing (video-processing-enrichment)</text>

                    <rect x="620" y="330" width="100" height="50" rx="4" fill="#fef3c7" stroke="#f59e0b"/>
                    <text x="670" y="355" text-anchor="middle" font-size="10" fill="#b45309">Rekognition</text>
                    <text x="670" y="370" text-anchor="middle" font-size="8" fill="#b45309">Video Analysis</text>

                    <rect x="730" y="330" width="100" height="50" rx="4" fill="#e0f2fe" stroke="#0ea5e9"/>
                    <text x="780" y="355" text-anchor="middle" font-size="10" fill="#0369a1">Transcribe</text>
                    <text x="780" y="370" text-anchor="middle" font-size="8" fill="#0369a1">Speech-to-Text</text>

                    <rect x="840" y="330" width="100" height="50" rx="4" fill="#fce7f3" stroke="#ec4899"/>
                    <text x="890" y="355" text-anchor="middle" font-size="10" fill="#be185d">Translate</text>
                    <text x="890" y="370" text-anchor="middle" font-size="8" fill="#be185d">Multi-language</text>

                    <rect x="950" y="330" width="100" height="50" rx="4" fill="#f3e8ff" stroke="#a855f7"/>
                    <text x="1000" y="355" text-anchor="middle" font-size="10" fill="#7c3aed">Bedrock</text>
                    <text x="1000" y="370" text-anchor="middle" font-size="8" fill="#7c3aed">Summaries</text>

                    <rect x="620" y="400" width="220" height="40" rx="4" fill="#bbf7d0" stroke="#22c55e"/>
                    <text x="730" y="425" text-anchor="middle" font-size="10" fill="#166534">Lambda Functions (22+)</text>

                    <rect x="850" y="400" width="100" height="40" rx="4" fill="#fecaca" stroke="#ef4444"/>
                    <text x="900" y="425" text-anchor="middle" font-size="10" fill="#dc2626">DynamoDB</text>

                    <rect x="960" y="400" width="90" height="40" rx="4" fill="#fbcfe8" stroke="#ec4899"/>
                    <text x="1005" y="425" text-anchor="middle" font-size="10" fill="#be185d">Face Index</text>

                    <rect x="620" y="455" width="440" height="40" rx="4" fill="#fef3c7" stroke="#f59e0b"/>
                    <text x="840" y="480" text-anchor="middle" font-size="10" fill="#b45309">S3 Video/Transcript Buckets</text>

                    <!-- Messaging Layer -->
                    <rect x="50" y="540" width="600" height="80" rx="8" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
                    <text x="350" y="565" text-anchor="middle" font-size="14" font-weight="bold" fill="#dc2626">Messaging Layer</text>

                    <rect x="70" y="580" width="120" height="30" rx="4" fill="#fecaca" stroke="#ef4444"/>
                    <text x="130" y="600" text-anchor="middle" font-size="10" fill="#dc2626">SNS Topics</text>

                    <rect x="200" y="580" width="120" height="30" rx="4" fill="#fef3c7" stroke="#f59e0b"/>
                    <text x="260" y="600" text-anchor="middle" font-size="10" fill="#b45309">SQS Queues</text>

                    <rect x="330" y="580" width="120" height="30" rx="4" fill="#e0e7ff" stroke="#6366f1"/>
                    <text x="390" y="600" text-anchor="middle" font-size="10" fill="#4338ca">EventBridge</text>

                    <rect x="460" y="580" width="170" height="30" rx="4" fill="#dbeafe" stroke="#3b82f6"/>
                    <text x="545" y="600" text-anchor="middle" font-size="10" fill="#1e40af">DynamoDB Streams</text>

                    <!-- External Integrations -->
                    <rect x="700" y="540" width="400" height="80" rx="8" fill="#f1f5f9" stroke="#64748b" stroke-width="2"/>
                    <text x="900" y="565" text-anchor="middle" font-size="14" font-weight="bold" fill="#475569">External Integrations</text>

                    <rect x="720" y="580" width="80" height="30" rx="4" fill="#e2e8f0" stroke="#64748b"/>
                    <text x="760" y="600" text-anchor="middle" font-size="10" fill="#475569">FRS</text>

                    <rect x="810" y="580" width="80" height="30" rx="4" fill="#e2e8f0" stroke="#64748b"/>
                    <text x="850" y="600" text-anchor="middle" font-size="10" fill="#475569">IESC</text>

                    <rect x="900" y="580" width="80" height="30" rx="4" fill="#e2e8f0" stroke="#64748b"/>
                    <text x="940" y="600" text-anchor="middle" font-size="10" fill="#475569">SOAP API</text>

                    <rect x="990" y="580" width="90" height="30" rx="4" fill="#e2e8f0" stroke="#64748b"/>
                    <text x="1035" y="600" text-anchor="middle" font-size="10" fill="#475569">Webhooks</text>

                    <!-- Security Layer -->
                    <rect x="50" y="650" width="1050" height="70" rx="8" fill="#ecfdf5" stroke="#10b981" stroke-width="2"/>
                    <text x="575" y="675" text-anchor="middle" font-size="14" font-weight="bold" fill="#059669">Security & Compliance</text>

                    <rect x="70" y="690" width="120" height="25" rx="4" fill="#bbf7d0" stroke="#22c55e"/>
                    <text x="130" y="707" text-anchor="middle" font-size="9" fill="#166534">Cognito</text>

                    <rect x="200" y="690" width="120" height="25" rx="4" fill="#bbf7d0" stroke="#22c55e"/>
                    <text x="260" y="707" text-anchor="middle" font-size="9" fill="#166534">IAM Roles</text>

                    <rect x="330" y="690" width="120" height="25" rx="4" fill="#bbf7d0" stroke="#22c55e"/>
                    <text x="390" y="707" text-anchor="middle" font-size="9" fill="#166534">KMS Encryption</text>

                    <rect x="460" y="690" width="120" height="25" rx="4" fill="#bbf7d0" stroke="#22c55e"/>
                    <text x="520" y="707" text-anchor="middle" font-size="9" fill="#166534">Secrets Manager</text>

                    <rect x="590" y="690" width="120" height="25" rx="4" fill="#bbf7d0" stroke="#22c55e"/>
                    <text x="650" y="707" text-anchor="middle" font-size="9" fill="#166534">WAF Protection</text>

                    <rect x="720" y="690" width="120" height="25" rx="4" fill="#bbf7d0" stroke="#22c55e"/>
                    <text x="780" y="707" text-anchor="middle" font-size="9" fill="#166534">VPC Endpoints</text>

                    <rect x="850" y="690" width="120" height="25" rx="4" fill="#bbf7d0" stroke="#22c55e"/>
                    <text x="910" y="707" text-anchor="middle" font-size="9" fill="#166534">CloudWatch</text>

                    <rect x="980" y="690" width="100" height="25" rx="4" fill="#bbf7d0" stroke="#22c55e"/>
                    <text x="1030" y="707" text-anchor="middle" font-size="9" fill="#166534">X-Ray</text>

                    <!-- Arrows -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
                        </marker>
                    </defs>

                    <!-- Frontend to API Gateway -->
                    <line x1="250" y1="120" x2="295" y2="120" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>

                    <!-- API Gateway to Orchestration -->
                    <line x1="500" y1="160" x2="545" y2="160" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>

                    <!-- Orchestration to CIP -->
                    <line x1="650" y1="260" x2="300" y2="285" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>

                    <!-- Orchestration to VPE -->
                    <line x1="800" y1="260" x2="850" y2="285" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>

                    <!-- CIP to Messaging -->
                    <line x1="300" y1="510" x2="300" y2="535" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>

                    <!-- VPE to Messaging -->
                    <line x1="850" y1="510" x2="550" y2="535" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>

                    <!-- Legend -->
                    <rect x="50" y="740" width="1050" height="50" rx="4" fill="#f8fafc" stroke="#e2e8f0"/>
                    <text x="70" y="760" font-size="11" font-weight="bold" fill="#1e293b">Legend:</text>

                    <rect x="130" y="752" width="16" height="16" fill="#bbf7d0" stroke="#22c55e"/>
                    <text x="155" y="764" font-size="10" fill="#1e293b">Lambda</text>

                    <rect x="220" y="752" width="16" height="16" fill="#fecaca" stroke="#ef4444"/>
                    <text x="245" y="764" font-size="10" fill="#1e293b">Database</text>

                    <rect x="320" y="752" width="16" height="16" fill="#fef3c7" stroke="#f59e0b"/>
                    <text x="345" y="764" font-size="10" fill="#1e293b">AWS AI/ML</text>

                    <rect x="430" y="752" width="16" height="16" fill="#e0e7ff" stroke="#6366f1"/>
                    <text x="455" y="764" font-size="10" fill="#1e293b">Orchestration</text>

                    <rect x="550" y="752" width="16" height="16" fill="#f3e8ff" stroke="#a855f7"/>
                    <text x="575" y="764" font-size="10" fill="#1e293b">Bedrock/Gen AI</text>

                    <rect x="680" y="752" width="16" height="16" fill="#e2e8f0" stroke="#64748b"/>
                    <text x="705" y="764" font-size="10" fill="#1e293b">External</text>

                    <rect x="780" y="752" width="16" height="16" fill="#dbeafe" stroke="#3b82f6"/>
                    <text x="805" y="764" font-size="10" fill="#1e293b">Frontend</text>
                </svg>
            </div>
        </section>

        <!-- Component Details -->
        <section>
            <h2>Component Layers</h2>
            <div class="card-grid">
                <div class="card">
                    <h3>Frontend Layer</h3>
                    <p>React-based SPA with Material-UI</p>
                    <ul class="card-features">
                        <li>React 18 + React Router</li>
                        <li>AWS Cognito Authentication</li>
                        <li>Real-time job status updates</li>
                        <li>Document preview & download</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>API Gateway Layer</h3>
                    <p>Dual endpoint architecture</p>
                    <ul class="card-features">
                        <li>Public API (CloudFront + WAF)</li>
                        <li>Private API (VPC Endpoints)</li>
                        <li>Cognito & API Key auth</li>
                        <li>Custom domain names</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Orchestration Layer</h3>
                    <p>Step Functions workflow engine</p>
                    <ul class="card-features">
                        <li>Job processing state machine</li>
                        <li>Parallel CIP/VPE execution</li>
                        <li>Task token callbacks</li>
                        <li>Error handling & retry</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Document AI (CIP)</h3>
                    <p>AWS Textract-based processing</p>
                    <ul class="card-features">
                        <li>OCR & Forms extraction</li>
                        <li>PII detection & redaction</li>
                        <li>ML-based classification</li>
                        <li>Searchable PDF generation</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Video AI (VPE)</h3>
                    <p>AWS Rekognition-based analysis</p>
                    <ul class="card-features">
                        <li>Speech transcription</li>
                        <li>Multi-language subtitles</li>
                        <li>Face detection & clustering</li>
                        <li>Content moderation</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Messaging Layer</h3>
                    <p>Event-driven architecture</p>
                    <ul class="card-features">
                        <li>SNS topics for notifications</li>
                        <li>SQS queues with DLQ</li>
                        <li>EventBridge for async events</li>
                        <li>DynamoDB Streams</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Download Section -->
        <section class="cta-box">
            <p>Download the full Draw.io diagram for editing:</p>
            <a href="../architecture-diagram.drawio" download class="btn btn-primary">Download Draw.io File</a>
            <p style="margin-top: 12px; font-size: 0.9rem; color: var(--text-secondary);">
                Open with <a href="https://app.diagrams.net" target="_blank">diagrams.net</a> (Draw.io)
            </p>
        </section>
    </main>
</body>
</html>
